<!DOCTYPE html>
<html>
<head>
    <title>Jared's Chat Client</title>
</head>
<link rel="stylesheet" type="text/css" href="style.css">
<body>
    <p class="alignright">Username:
        <button class="alignright" type="button">Sign out</button>
    </p>
    <div style="clear: both;"></div>
    <textarea cols="70" rows="20">
        This is where the user can enter text. If there's too much text, the textbox can develop scrollbars to accommodate the extra text...
    </textarea>
    <textarea cols="20" rows="20">
    username1
    user2
    me
    </textarea>
    <form action="demo_form.asp">
        Broadcast Message:
        <br />
        <input type="text"  size="90" name="messageinput">
        <input type="submit" value="Broadcast">
    </form>

    <script type="text/javascript">
        var connection = new WebSocket('ws://127.0.0.1:8787');
        var username = localStorage.getItem("username");

        window.onload = function() {

        /*var form = document.getElementById('loginform');
        var username = document.getElementById('usernamefield');
        var submitBtn = document.getElementById('submitbutton');
        var header = document.getElementById('header');
        */
        };

        connection.onopen = function(){
            /*Send a small message to the console once the connection is established */
            console.log('Connection open!');
            console.log("Username is: " + username);
            connection.send("ME IS " + username);
        }

        connection.onerror = function(error){
            alert("An error has occured");
            console.log('Websocket error: ' + error);
        }

        connection.onmessage = function(e){
           var server_message = e.data;
            console.log("MESSAGE: " + server_message);
        }

        /* Connection is refused or closed */
        connection.onclose = function(){
            console.log('Connection closed');
        }

    </script>

</body>
</html>
